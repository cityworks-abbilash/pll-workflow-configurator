<!DOCTYPE html>
<html>
<head>
  <title>Live Traffic Cam</title>
  <style>
    img {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <h3>Macdonald Bridge â€“ Dartmouth Bound</h3>
  <img
    class="traffic-cam-image"
    src="https://halifaxharbourbridges.ca/wp-content/traffic_cam_images/macdonald-dartmouth-bound.png"
    alt="Traffic Cam"
  />

  <script>
    // Function to refresh traffic camera images
    function refreshTrafficCamImages() {
      console.log('Refreshing traffic camera images...');
      const images = document.getElementsByClassName('traffic-cam-image');
      for (let i = 0; i < images.length; i++) {
        const baseUrl = images[i].src.split('?')[0]; // Remove old ?time=
        const newUrl = baseUrl + '?time=' + new Date().getTime();
        images[i].src = newUrl;
        console.log('Updated image ' + i + ': ' + newUrl);
      }
    }

    // Run on initial page load
    document.addEventListener('DOMContentLoaded', function () {
      refreshTrafficCamImages();
    });

    // Refresh every 10 seconds
    setInterval(refreshTrafficCamImages, 10000);
  </script>
</body>
</html>
